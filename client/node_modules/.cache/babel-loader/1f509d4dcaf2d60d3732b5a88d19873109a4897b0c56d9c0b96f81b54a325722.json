{"ast":null,"code":"import _regeneratorRuntime from\"/home/akhil/Desktop/ecoverse/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/home/akhil/Desktop/ecoverse/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/home/akhil/Desktop/ecoverse/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/akhil/Desktop/ecoverse/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import Layout from'../components/Layout/Layout';import{useNavigate}from'react-router-dom';import axios from'axios';import{useAuth}from'../Context/auth.js';import toast from'react-hot-toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginPage=function LoginPage(){var navigate=useNavigate();var _ref=useAuth()||{},_ref2=_slicedToArray(_ref,2),auth=_ref2[0],setAuth=_ref2[1];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post('http://localhost:8080/api/v1/auth/login',{email:email,password:password});case 4:res=_context.sent;if(res.data.success){setAuth(_objectSpread(_objectSpread({},auth),{},{user:res.data.user,token:res.data.token}));localStorage.setItem('auth',JSON.stringify(res.data));navigate('/');toast.success(\"logged in successfully\");}else{toast.error(res.data.message);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);toast.error(\"something went wrong\");case 11:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return function handleSubmit(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"h2\",{class:\"head22\",children:\"Log In\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},className:\"form-control\",id:\"exampleInputEmail1\",\"aria-describedby\":\"emailHelp\",placeholder:\"Email\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},className:\"form-control\",id:\"exampleInputPassword1\",placeholder:\"Password\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",id:\"submit\",className:\"btn btn-primary my-3\",onClick:function onClick(e){return handleSubmit(e);},children:\"Submit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"notamem my-3\",children:[\"Not a member? \",/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",onClick:function onClick(){return navigate('/signup');},children:\"SignUp\"})]})]})})});};export default LoginPage;","map":{"version":3,"names":["React","useState","Layout","useNavigate","axios","useAuth","toast","jsx","_jsx","jsxs","_jsxs","LoginPage","navigate","_ref","_ref2","_slicedToArray","auth","setAuth","_useState","_useState2","email","setEmail","_useState3","_useState4","password","setPassword","handleSubmit","_ref3","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","res","wrap","_callee$","_context","prev","next","preventDefault","post","sent","data","success","_objectSpread","user","token","localStorage","setItem","JSON","stringify","error","message","t0","stop","_x","apply","arguments","children","className","class","type","value","onChange","target","id","placeholder","onClick","href"],"sources":["/home/akhil/Desktop/ecoverse/client/src/pages/LoginPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport Layout from '../components/Layout/Layout';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios'\nimport { useAuth } from '../Context/auth.js';\n\n\nimport toast from 'react-hot-toast'\nconst LoginPage = () => {\n\n  const navigate = useNavigate();\n  const [auth,setAuth] = useAuth() || {};\n  const [email,setEmail] = useState('')\n  const [password,setPassword] = useState('') \n  const handleSubmit = async (e) => {\n    e.preventDefault()\n      try{\n        const res = await axios.post('http://localhost:8080/api/v1/auth/login',{email,password})\n        if(res.data.success)\n        {\n          setAuth({\n            ...auth,\n            user:res.data.user,\n            token:res.data.token\n        });\n        localStorage.setItem('auth',JSON.stringify(res.data));\n          navigate('/')\n          toast.success(\"logged in successfully\");\n        }\n        else{\n           toast.error(res.data.message)\n        }\n\n      }\n      catch(error){\n        toast.error(\"something went wrong\")\n      }\n\n      \n\n  }\n\n \n  return (\n    <Layout>\n      <div className=\"container\">\n        <div className=\"box\">\n          <form>\n            <h2 class=\"head22\">Log In</h2>\n            <div className=\"mb-3\">\n              <input type=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} className=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" placeholder=\"Email\" />\n            </div>\n            <div className=\"mb-3\">\n              <input type=\"password\" value={password} onChange={(e)=>setPassword(e.target.value)} className=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"Password\" />\n            </div>\n            <button type=\"submit\" id=\"submit\" className=\"btn btn-primary my-3\" onClick={(e)=>handleSubmit(e)}>Submit</button>\n          </form>\n          <div className=\"notamem my-3\">\n            Not a member? <a href = \"/signup\" onClick={() => navigate('/signup')}>SignUp</a>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default LoginPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}