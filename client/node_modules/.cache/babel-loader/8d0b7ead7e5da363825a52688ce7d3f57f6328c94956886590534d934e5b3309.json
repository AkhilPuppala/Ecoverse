{"ast":null,"code":"import _regeneratorRuntime from\"/home/akhil/Desktop/ecoverse/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/akhil/Desktop/ecoverse/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/akhil/Desktop/ecoverse/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Layout from'../components/Layout/Layout';// import toast from 'react-hot-toast'\nimport axios from'axios';import{NavLink,useParams}from'react-router-dom';import{useAuth}from'../Context/auth.js';import toast from'react-hot-toast';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EventDetails=function EventDetails(){var params=useParams();var navigate=useNavigate();var _useAuth=useAuth(),_useAuth2=_slicedToArray(_useAuth,2),auth=_useAuth2[0],setAuth=_useAuth2[1];var _useState=useState(0),_useState2=_slicedToArray(_useState,2),host=_useState2[0],setHost=_useState2[1];var _useState3=useState({title:\"\",description:\"\",place:\"\",date:\"\",organiser:null}),_useState4=_slicedToArray(_useState3,2),event=_useState4[0],setEvent=_useState4[1];useEffect(function(){if(params!==null&&params!==void 0&&params.title)getEvent();},[params===null||params===void 0?void 0:params.title]);var getEvent=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data,_data$event;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:8080/api/v1/event/getOneEvent/\".concat(params.title));case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(data!==null&&data!==void 0&&data.success){toast.success('events were fetched');setEvent(data===null||data===void 0?void 0:data.event);if((auth===null||auth===void 0?void 0:auth.user._id)===(data===null||data===void 0?void 0:(_data$event=data.event)===null||_data$event===void 0?void 0:_data$event.organiser)){setHost(1);}console.log(event);}else{toast.error(data===null||data===void 0?void 0:data.message);}_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);toast.error(\"something went wrong\");case 12:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function getEvent(){return _ref.apply(this,arguments);};}();var participate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var dat,_yield$axios$put,data,_data$user;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;console.log(auth===null||auth===void 0?void 0:auth.token);console.log('/n');dat=localStorage.getItem('auth');console.log(auth.token);_context2.next=7;return axios.put(\"http://localhost:8080/api/v1/auth/participate/\".concat(params.eid));case 7:_yield$axios$put=_context2.sent;data=_yield$axios$put.data;if(data!==null&&data!==void 0&&data.success){toast.success(data===null||data===void 0?void 0:data.message);// navigate('/yourparticipations');\nconsole.log(data===null||data===void 0?void 0:(_data$user=data.user)===null||_data$user===void 0?void 0:_data$user.events);}_context2.next=16;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);toast.error(\"something went wrong\");case 16:case\"end\":return _context2.stop();}},_callee2,null,[[0,12]]);}));return function participate(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",id:\"eventdetails\",children:[/*#__PURE__*/_jsx(\"h3\",{id:\"Event\",children:event===null||event===void 0?void 0:event.title}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description : \"}),event===null||event===void 0?void 0:event.description]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Address : \"}),event===null||event===void 0?void 0:event.place]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date : \"}),\"Date:\",new Date(event===null||event===void 0?void 0:event.date).getFullYear(),\"-\",new Date(event===null||event===void 0?void 0:event.date).getMonth()+1,\"-\",new Date(event===null||event===void 0?void 0:event.date).getDate()]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Time: \"}),event.time]}),host===0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Want to participate in the above event? Click below\"}),\" \",/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return participate();},children:\"Participate\"})]}):/*#__PURE__*/_jsx(\"h5\",{children:\"You are the host for this event\"})]})});};export default EventDetails;","map":{"version":3,"names":["React","useEffect","useState","Layout","axios","NavLink","useParams","useAuth","toast","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EventDetails","params","navigate","_useAuth","_useAuth2","_slicedToArray","auth","setAuth","_useState","_useState2","host","setHost","_useState3","title","description","place","date","organiser","_useState4","event","setEvent","getEvent","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","_data$event","wrap","_callee$","_context","prev","next","get","concat","sent","success","user","_id","console","log","error","message","t0","stop","apply","arguments","participate","_ref2","_callee2","dat","_yield$axios$put","_data$user","_callee2$","_context2","token","localStorage","getItem","put","eid","events","children","className","id","Date","getFullYear","getMonth","getDate","time","onClick"],"sources":["/home/akhil/Desktop/ecoverse/client/src/pages/EventDetails.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Layout from '../components/Layout/Layout'\n// import toast from 'react-hot-toast'\nimport axios from 'axios'\nimport { NavLink, useParams } from 'react-router-dom'\n\nimport { useAuth } from '../Context/auth.js'\nimport  toast  from 'react-hot-toast'\nimport { useNavigate } from 'react-router-dom'\n\nconst EventDetails = () => {\n  \n  const params = useParams()\n  const navigate = useNavigate()\n  const [auth,setAuth] = useAuth()\n  const [host,setHost] = useState(0)\n  const [event,setEvent] = useState({\n    title:\"\",\n    description:\"\",\n    place:\"\",\n    date:\"\",\n    organiser:null\n  })\n  useEffect(  ()=>{\n    if(params?.title) getEvent();\n     \n   },[params?.title])\n \n  const getEvent = async() => {\n    try{\n\n      const {data} = await axios.get(`http://localhost:8080/api/v1/event/getOneEvent/${params.title}`)\n      if(data?.success)\n      {\n         toast.success('events were fetched')\n        setEvent(data?.event)\n        if(auth?.user._id === data?.event?.organiser)\n        {\n          setHost(1)\n        }\n        console.log(event)\n      }\n      else\n      {\n       toast.error(data?.message)\n      }\n\n    }\n    catch(error)\n    {\n      console.log(error)\n      toast.error(\"something went wrong\")\n    }\n  }\n  \n  const participate = async() =>{\n    try{\n      console.log(auth?.token)\n      console.log('/n')\n      const dat = localStorage.getItem('auth')\n      console.log(auth.token)\n        const {data} = await axios.put(`http://localhost:8080/api/v1/auth/participate/${params.eid}`)\n\n        if(data?.success)\n        {\n          toast.success(data?.message)\n         // navigate('/yourparticipations');\n          console.log(data?.user?.events)\n        }\n    }\n    catch(error)\n    {\n      console.log(error)\n      toast.error(\"something went wrong\")\n    }\n  }\n \n  return (\n    <Layout>\n      <div className=\"container\" id=\"eventdetails\">\n        <h3 id=\"Event\">{event?.title}</h3>\n        <p><strong>Description : </strong>{event?.description}</p>\n        <hr></hr>\n        <p><strong>Address : </strong>{event?.place}</p>\n        <hr></hr>\n        <p><strong>Date : </strong>Date:{new Date(event?.date).getFullYear()}-{new Date(event?.date).getMonth()+1}-{new Date(event?.date).getDate()}</p>\n        <hr></hr>\n        <p><strong>Time: </strong>{event.time}</p>\n        {host===0 ?  <><p>Want to participate in the above event? Click below</p> <button className='btn btn-primary' onClick={() => participate()}>Participate</button></> : <h5>You are the host for this event</h5>} \n        </div>\n    </Layout>\n  )\n}\n\nexport default EventDetails"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}